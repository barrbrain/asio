<HTML>
  <HEAD>
    <TITLE>asio Design: Platform-Specific Implementation</TITLE>
    <LINK HREF="asio.css" REL="stylesheet" TYPE="text/css">
    <LINK HREF="tabs.css" REL="stylesheet" TYPE="text/css">
  </HEAD>
  <BODY BGCOLOR="#FFFFFF">
    <DIV CLASS="qindex">
      <TABLE BORDER="0" WIDTH="100%">
        <TR>
          <TD ALIGN="LEFT">
            <B>asio 0.3.7</B>
          </TD>
          <TD ALIGN="RIGHT">
            <A CLASS="qindex" HREF="../index.html">Home</A> |
            <A CLASS="qindex" HREF="../reference/index.html">Reference</A> |
            <A CLASS="qindex" HREF="../tutorial/index.html">Tutorial</A> |
            <A CLASS="qindex" HREF="../examples/index.html">Examples</A> |
            <A CLASS="qindex" HREF="../design/index.html">Design</A>
          </TD>
        </TR>
      </TABLE>
    </DIV>
    <DIV CLASS="qindex">
      <TABLE BORDER="0" WIDTH="100%">
        <TR>
          <TD ALIGN="LEFT">
            <B>Design</B>
          </TD>
        </TR>
      </TABLE>
    </DIV>
<!-- Generated by Doxygen 1.4.7 -->
<h1><a class="anchor" name="designimplementation">Platform-Specific Implementation</a></h1>This design note lists platform-specific implementation details, such as the default demultiplexing mechanism, the number of threads created internally, and when threads are created.<h2><a class="anchor" name="linux24">
Linux Kernel 2.4</a></h2>
<h3><a class="anchor" name="linux24demux">
Demultiplexing Mechanism</a></h3>
Uses <code>select</code> for demultiplexing. This means that the number of file descriptors in the process cannot be permitted to exceed FD_SETSIZE.<h3><a class="anchor" name="linux24threads">
Threads</a></h3>
Demultiplexing using <code>select</code> is performed in one of the threads that calls <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00140.html#50ae7753f2c851cd3e91724bbfc5b444">asio::io_service::run()</a>.<p>
An additional thread per io_service is used to emulate asynchronous host resolution. This thread is created on the first call to either <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::tcp::resolver::async_resolve()</a> or <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::udp::resolver::async_resolve()</a>.<h2><a class="anchor" name="linux26">
Linux Kernel 2.6</a></h2>
<h3><a class="anchor" name="linux26demux">
Demultiplexing Mechanism</a></h3>
Uses <code>epoll</code> for demultiplexing.<h3><a class="anchor" name="linux26threads">
Threads</a></h3>
Demultiplexing using <code>epoll</code> is performed in one of the threads that calls <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00140.html#50ae7753f2c851cd3e91724bbfc5b444">asio::io_service::run()</a>.<p>
An additional thread per io_service is used to emulate asynchronous host resolution. This thread is created on the first call to either <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::tcp::resolver::async_resolve()</a> or <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::udp::resolver::async_resolve()</a>.<h2><a class="anchor" name="solaris">
Solaris</a></h2>
<h3><a class="anchor" name="solarisdemux">
Demultiplexing Mechanism</a></h3>
Uses <code>select</code> for demultiplexing. This means that the number of file descriptors in the process cannot be permitted to exceed FD_SETSIZE.<h3><a class="anchor" name="solaristhreads">
Threads</a></h3>
Demultiplexing using <code>select</code> is performed in one of the threads that calls <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00140.html#50ae7753f2c851cd3e91724bbfc5b444">asio::io_service::run()</a>.<p>
An additional thread per io_service is used to emulate asynchronous host resolution. This thread is created on the first call to either <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::tcp::resolver::async_resolve()</a> or <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::udp::resolver::async_resolve()</a>.<h2><a class="anchor" name="macosx">
Mac OS X</a></h2>
<h3><a class="anchor" name="macosxdemux">
Demultiplexing Mechanism</a></h3>
Uses <code>kqueue</code> for demultiplexing.<h3><a class="anchor" name="macosxthreads">
Threads</a></h3>
Demultiplexing using <code>kqueue</code> is performed in one of the threads that calls <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00140.html#50ae7753f2c851cd3e91724bbfc5b444">asio::io_service::run()</a>.<p>
An additional thread per io_service is used to emulate asynchronous host resolution. This thread is created on the first call to either <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::tcp::resolver::async_resolve()</a> or <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::udp::resolver::async_resolve()</a>.<h2><a class="anchor" name="win9x">
Windows 95, 98 and Me</a></h2>
<h3><a class="anchor" name="win9xdemux">
Demultiplexing Mechanism</a></h3>
Uses <code>select</code> for demultiplexing.<h3><a class="anchor" name="win9xthreads">
Threads</a></h3>
Demultiplexing using <code>select</code> is performed in one of the threads that calls <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00140.html#50ae7753f2c851cd3e91724bbfc5b444">asio::io_service::run()</a>.<p>
An additional thread per io_service is used to emulate asynchronous host resolution. This thread is created on the first call to either <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::tcp::resolver::async_resolve()</a> or <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::udp::resolver::async_resolve()</a>.<h2><a class="anchor" name="winnt">
Windows NT, 2000 and XP</a></h2>
<h3><a class="anchor" name="winntdemux">
Demultiplexing Mechanism</a></h3>
Uses overlapped I/O and I/O completion ports for all asynchronous datagram_socket, stream_socket and socket_acceptor operations except for asynchronous connect.<p>
Uses <code>select</code> for deadline_timer operations and for emulating asynchronous connect.<h3><a class="anchor" name="winnthreads">
Threads</a></h3>
Demultiplexing using I/O completion ports is performed in all threads that call <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00140.html#50ae7753f2c851cd3e91724bbfc5b444">asio::io_service::run()</a>.<p>
An additional thread per io_service is used to for the <code>select</code> demultiplexing. This thread is created whenever the first deadline_timer, datagram_socket, stream_socket or socket_acceptor is created.<p>
An additional thread per io_service is used to emulate asynchronous host resolution. This thread is created on the first call to either <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::tcp::resolver::async_resolve()</a> or <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00109.html#2659f5d6a62356bb48466e6a5cf568cb">asio::ip::udp::resolver::async_resolve()</a>.     <DIV CLASS="qindex">
      <TABLE BORDER="0" WIDTH="100%">
        <TR>
          <TD ALIGN="LEFT">
            <B>asio 0.3.7</B>
          </TD>
          <TD ALIGN="RIGHT">
            <A CLASS="qindex" HREF="../index.html">Home</A> |
            <A CLASS="qindex" HREF="../reference/index.html">Reference</A> |
            <A CLASS="qindex" HREF="../tutorial/index.html">Tutorial</A> |
            <A CLASS="qindex" HREF="../examples/index.html">Examples</A> |
            <A CLASS="qindex" HREF="../design/index.html">Design</A>
          </TD>
        </TR>
      </TABLE>
    </DIV>
  </BODY>
</HTML>
